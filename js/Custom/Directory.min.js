function SetMemberRolesCount() { $.ajax({ type: "POST", url: "api/Directory/MemberRolesCount", contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); $.each(t, function () { switch (parseInt(this.RoleMemBerId)) { case 2: lblTransporter.text("Transporter (" + this.Count + ")"); break; case 5: lblPackersAndMovers.text("Packers And Movers (" + this.Count + ")"); break; case 3: lblServiceProvider.text("Service Providers (" + this.Count + ")") } }) } } }) } function BindTransporterTypes() { $.ajax({ type: "POST", url: "api/Directory/TransporterTypes", contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); $.each(t, function () { chkTransporterType.append($("<tr><td><input type='checkbox' value='" + this.Id + "'><label>" + this.Name + " (" + this.RegisteredUsersCount + ")<\/label><\/td><\/tr>")) }) } } }) } function BindPackersAndMoversTypes() { $.ajax({ type: "POST", url: "api/Directory/PackersAndMoversTypes", contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); $.each(t, function () { chkPackersAndMoversType.append($("<tr><td><input type='checkbox' value='" + this.Id + "'><label>" + this.Name + " (" + this.RegisteredUsersCount + ")<\/label><\/td><\/tr>")) }) } } }) } function BindServiceProviderTypes() { $.ajax({ type: "POST", url: "api/Directory/ServiceProviderTypes", contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); $.each(t, function () { chkServiceProviderType.append($("<tr><td><input type='checkbox' value='" + this.Id + "'><label>" + this.Name + " (" + this.RegisteredUsersCount + ")<\/label><\/td><\/tr>")) }) } } }) } function BindCategories() { rbTransporter.prop("checked") ? ($("#chkTransporterType").empty(), divTransporterType.show(), divPackersAndMoversType.hide(), divServiceProviderType.hide(), BindTransporterTypes()) : rbPackersAndMovers.prop("checked") ? (divTransporterType.hide(), divPackersAndMoversType.show(), divServiceProviderType.hide(), BindPackersAndMoversTypes()) : rbServiceProvider.prop("checked") && (divTransporterType.hide(), divPackersAndMoversType.hide(), divServiceProviderType.show(), BindServiceProviderTypes()) } function BindStates() { $.ajax({ type: "POST", url: "api/Address/StatesForWeb", contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); ddlState.html(""); ddlState.append($("<option><\/option>").val("-1").html("All")); $.each(t, function () { ddlState.append($("<option><\/option>").val(this.Id).html(this.Name)) }) } } }); ddlDistrict.html(""); ddlDistrict.prop("disabled", !0); ddlCity.html(""); ddlCity.prop("disabled", !0) } function BindDistrictsByStateId() { $.ajax({ type: "POST", url: "api/Address/DistrictsByStateIdForWeb", data: JSON.stringify({ StateId: ddlState.val() }), contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); ddlDistrict.append($("<option><\/option>").val("-1").html("All")); $.each(t, function () { ddlDistrict.append($("<option><\/option>").val(this.Id).html(this.Name)) }) } else lblMessageDistrict.html("District does not exist") }, failure: function () { lblMessageDistrict.html("District does not exist") } }) } function BindCitiesByDistrictId() { $.ajax({ type: "POST", url: "api/Address/CitiesByDistrictIdForWeb", data: JSON.stringify({ DistrictId: ddlDistrict.val() }), contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (n) { if (n != null && n != "") { var t = JSON.parse(n); ddlCity.append($("<option><\/option>").val("-1").html("All")); $.each(t, function () { ddlCity.append($("<option><\/option>").val(this.Id).html(this.Name)) }) } else lblMessageCity.html("City does not exist") }, failure: function () { lblMessageCity.html("City does not exist") } }) } function IsPinCodeExist() { var n = !1; return $.ajax({ type: "POST", url: "api/Address/IsPinCodeExist", data: JSON.stringify({ PinCode: txtPinCode.val() }), contentType: "application/json; charset=utf-8", async: !1, dataType: "json", success: function (t) { n = t == "true"; n ? lblMessagePinCode.html("") : lblMessagePinCode.html("Pincode does not exist.") }, failure: function () { lblMessagePinCode.html("Pincode does not exist.") } }), n } function SetDefault() { SetMemberRolesCount(); rbTransporter.prop("checked", !0); BindCategories(); BindStates(); count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) } function ClearFilters(n) { $("#divDirectoryContent input[type=checkbox]").each(function () { $(this).attr("checked", !1) }); $("#divDirectoryContent input[type=text]").each(function () { $(this).val("") }); txtCompanyName.val(""); txtPinCode.val(""); ddlState.val("-1"); ddlState.change(); n.preventDefault() } rbTransporter.change(function (n) { BindCategories(); ClearFilters(n) }); rbPackersAndMovers.change(function (n) { BindCategories(); ClearFilters(n) }); rbServiceProvider.change(function (n) { BindCategories(); ClearFilters(n) }); btnClearFilters.click(function (n) { ClearFilters(n) }); btnSearchByCompanyName.click(function (n) { txtCompanyName.val().length < 1 ? lblMessageCompanyName.html("Please provide company name.") : (count = 0, pageIndex = 0, BindDirectoryUsers(pageIndex, !0), lblMessageCompanyName.html("")); n.preventDefault() }); chkTransporterType.change(function () { count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); chkPackersAndMoversType.change(function () { count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); chkServiceProviderType.change(function () { count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); ddlState.change(function () { lblMessageDistrict.html(""); ddlDistrict.html(""); ddlState.val() != "-1" ? (BindDistrictsByStateId(), ddlDistrict.prop("disabled", !1)) : ddlDistrict.prop("disabled", !0); ddlCity.html(""); ddlCity.prop("disabled", !0); count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); ddlDistrict.change(function () { lblMessageCity.html(""); ddlCity.html(""); ddlDistrict.val() != "-1" ? (BindCitiesByDistrictId(), ddlCity.prop("disabled", !1)) : ddlCity.prop("disabled", !0); count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); ddlCity.change(function () { count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0) }); btnSearchByPinCode.click(function (n) { txtPinCode.val().length < 1 ? (lblMessagePinCode.html("Please provide pincode."), txtPinCode.focus()) : txtPinCode.val().length < 6 ? (lblMessagePinCode.html("Please provide valid pincode."), txtPinCode.focus()) : IsPinCodeExist() && (count = 0, pageIndex = 0, BindDirectoryUsers(pageIndex, !0)); n.preventDefault() }); txtPinCode.blur(function () { txtPinCode.val().length < 1 && lblMessagePinCode.html("") }); liTopResult.click(function (n) { liTopResult.addClass("active"); liUserRating.removeClass("active"); spanOrderBy.text("Top Result"); count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0); n.preventDefault() }); liUserRating.click(function (n) { liUserRating.addClass("active"); liTopResult.removeClass("active"); spanOrderBy.text("User Rating"); count = 0; pageIndex = 0; BindDirectoryUsers(pageIndex, !0); n.preventDefault() }); $(document).ready(function () { SetDefault() });